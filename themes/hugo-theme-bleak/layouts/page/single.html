{{ $baseurl := .Site.BaseURL }}
{{ partial "header.html" . }}

<main class="content" role="main">
	<article class="post">
		<div class="inner">

			<div id="push">

  			<header class="post-header">
  				<span class="post-meta">
						<span class="post-date">{{ .Date.Format "02.01.2006" }}</span>
  				</span>
  				<div class="clear"></div>
  				<h1 class="post-title">{{ .Title }}</h1>
  			</header>

				{{ if .Params.image }}
				<figure class="post-image">
					 <img src="{{ .Params.image }}" alt="{{ .Title }}" title="{{ .Title }}" />
				</figure>
				{{ end }}

  			<section class="post-content">
  				{{ .Content }}
  			</section>

				<!--/page/tags/ /page/tags/ /page/tags/ /page/tags/ /page/tags/-->
				{{ if eq (relURL .URL) ("/page/tags/" | safeHTML) }}
				<section>



					{{ $sitetags := .Site.Taxonomies.tags }}
					{{ $tagshalf := int (div (len $sitetags) 3) }}
					{{ $tagshalf1 := add $tagshalf 1 }}
					{{ $tagshalf2 := add (mul $tagshalf 2) 1 }}
					{{ $.Scratch.Set "firsthalf" 0 }}
					{{ $.Scratch.Set "secondhalf" 0 }}
					{{ $.Scratch.Set "thirdhalf" 0 }}
					<div class="container">
						<div class="left">
					<ul>
						{{ range $name, $taxonomy := $sitetags }}
						{{ $.Scratch.Add "firsthalf" 1}}
						{{ if le ($.Scratch.Get "firsthalf") $tagshalf1 }}
						{{ if ne $name "" }}
						<li><a href="/tags/{{$name | urlize}}/">{{ $name | humanize }} ({{ $taxonomy.Count }})</a></li>
						{{ end }}
						{{ end }}
						{{ end }}
					</ul></div>
						<div class="middle">
					<ul>
						{{ range $name, $taxonomy := $sitetags }}
						{{ $.Scratch.Add "secondhalf" 1}}
						{{ if gt ($.Scratch.Get "secondhalf") $tagshalf1 }}

						{{ if le ($.Scratch.Get "secondhalf") $tagshalf2 }}


						{{ if ne $name "" }}
						<li><a href="/tags/{{$name | urlize}}/">{{ $name | humanize }} ({{ $taxonomy.Count }})</a></li>
						{{ end }}
						{{ end }}
						{{ end }}
						{{ end }}
					</ul></div>
						<div class="right">
					<ul>
						{{ range $name, $taxonomy := $sitetags }}
						{{ $.Scratch.Add "thirdhalf" 1}}
						{{ if gt ($.Scratch.Get "thirdhalf") $tagshalf2 }}
						{{ if ne $name "" }}
						<li><a href="/tags/{{$name | urlize}}/">{{ $name | humanize }} ({{ $taxonomy.Count }})</a></li>
						{{ end }}
						{{ end }}
						{{ end }}
					</ul>
					</div></div>


				</section>



				{{ end }}
				<!--/page/tags/ /page/tags/ /page/tags/ /page/tags/ /page/tags/-->

				{{ if eq (relURL .URL) ("/page/rated/" | safeHTML) }}
				<section>



							{{ range $key, $taxonomy := .Site.Taxonomies.rated }}


					{{ if ne $key "" }}
							<h2><a href="/rated/{{ $key }}/">{{ $key }}</a></h2>
							<ul>
								{{ range $taxonomy.Pages }}
								<li hugo-nav="{{ .RelPermalink}}"><a href="{{ .Permalink}}"> {{ .LinkTitle }} </a> </li>
								{{ end }}
							</ul>
							{{ end }}
					{{ end }}



				</section>
				{{ end }}






				{{ if eq (relURL .URL) ("/page/years/" | safeHTML) }}
				<section>



					<!-- create a list with all uppercase letters -->
					{{ $letters := split "1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021" "," }}



					<!-- range all pages sorted by their title -->
					{{ range sort .Site.RegularPages }}{{ substr .Title -2 4 }}
					<!-- get the first character of each title. Assumes that the title is never empty! -->
					{{ $firstChar := substr .Title -2 4 }}


					<!-- in case $firstChar is a letter -->
					{{ if $firstChar | in $letters }}
					<!-- get the current letter -->
					{{ $curLetter := $.Scratch.Get "curLetter" }}
					<!-- if $curLetter isn't set or the letter has changed -->
					{{ if ne $firstChar $curLetter }}
					<!-- update the current letter and print it -->
					{{ $.Scratch.Set "curLetter" $firstChar }}
					<h3>{{ $firstChar }}</h3>
					{{ end }}

					-- {{ .Title }}<br>
					{{ end }}
					{{ end }}

				</section>
				{{ end }}









				{{ if eq (relURL .URL) ("/" | safeHTML) }}
				<section>
					<h2 class="post-title">Недавно послушал по данным Last.fm</h2>
					<div class="listening-to post-content" data-lfm-user="_HAba" data-lfm-api="d1e33c66a6d36ea44112850139bd41ed" data-lfm-limit="10"></div>

				</section>
				{{ end }}
				<!--<footer class="post-footer">-->
  			<!--</footer>-->

  			{{ partial "comments.html" . }}

			</div>

		</div>
	</article>
</main>

{{ partial "footer.html" . }}
